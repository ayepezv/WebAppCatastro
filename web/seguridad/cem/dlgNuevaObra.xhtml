<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <p:dialog id="dlgNuevaObra" widgetVar="dlgNuevaObra" closable="false" modal="true" resizable="true" 
              header="Registrar obra" showEffect="size" hideEffect="size"
              width="60%">
        <h:form id="frmNuevaObra">                     
            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">                
                <p:outputLabel value="Nombre de la Obra:"/>
                <p:inputText value="#{ctCem.objObra.nombreObra}"
                             style="width: 100%"
                             required="true" 
                             requiredMessage="El nombre de la obra es obligatorio"/>                                
            </p:panelGrid>           
            <p:selectOneMenu style="text-align: justify; " id="idTipoObra" 
                             value="#{ctCem.objObra.tipoObra.idTipoObra}" effect="fade" filter="true" 
                             filterMatchMode="contains" requiredMessage="El tipo de obra es campo obligatorio." required="true">
                <f:selectItem itemLabel="* Tipo de obra" itemValue="" />
                <f:selectItems value="#{ctCem.lstTipoObras}" 
                               var="tipObra"
                               itemLabel="#{tipObra.tipoObra}"
                               itemValue="#{tipObra.idTipoObra}" />                        
            </p:selectOneMenu>            
            <p:panelGrid columns="6" styleClass="ui-panelgrid-blank form-group">
                <p:outputLabel value="Costo de la obra:"/>
                <p:inputText value="#{ctCem.objObra.valorObra}"/>
                <p:outputLabel value="Forma de pago:"/>
                <p:selectOneMenu style="text-align: justify; " id="idFormaPago" 
                                 value="#{ctCem.objObra.formaPago.idFormaPago}" effect="fade" filter="true" 
                                 filterMatchMode="contains" requiredMessage="El tipo de obra es campo obligatorio." required="true">
                    <f:selectItem itemLabel="-- Seleccione --" itemValue="" />
                    <f:selectItems value="#{ctCem.lstFormaPago}" 
                                   var="formaPago"
                                   itemLabel="#{formaPago.formaPago}"
                                   itemValue="#{formaPago.idFormaPago}" />                        
                </p:selectOneMenu>
                <p:outputLabel value="Plazo (Años):"/>
                <p:inputText value="#{ctCem.objObra.plazo}"/>
                <p:outputLabel value="Fecha inicial de pago:"/>
                <p:calendar value="#{ctCem.objObra.fechaInicialPago}" 
                            id="txtFechaInicio" requiredMessage="Ingrese la fecha, el campo es obligatorio."
                            placeholder="dd/MM/yyyy" 
                            locale="es"
                            pattern="dd/MM/yyyy" required="true" />                
            </p:panelGrid>               

            <b>Términos de pago</b>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">
                <p:outputLabel value="Municipio:"/>
                <p:inputText value="#{ctCem.objObra.porctMunicipio}" style="width: 80%"/>
            </p:panelGrid>            
            <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group">
                <p:outputLabel value="Beneficiarios directos:"/>
                <p:inputText value="#{ctCem.objObra.porctBenefDirect}" style="width: 80%"/>
                <p:outputLabel value="Basado en:"/>
                <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group">
                    <p:outputLabel value="Frente:"/>
                    <p:inputText value="#{ctCem.objObra.frenteBenefDirect}" style="width: 80%"/>
                    <p:outputLabel value="Costo metro lineal:"/>
                    <p:inputText value="#{ctCem.objObra.valorMetroDirecto}" style="width: 80%"/> 
                    <p:outputLabel value="Avalúo:"/>
                    <p:inputText value="#{ctCem.objObra.avaluoBenefDirect}" style="width: 80%"/> 
                    <p:outputLabel value="Rango de afectación:"/>
                    <p:inputText value="#{ctCem.objObra.rangoAfectacion}"/>
                </p:panelGrid>
            </p:panelGrid>            
            <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group">
                <p:outputLabel value="Beneficiarios indirectos:"/>
                <p:inputText value="#{ctCem.objObra.porctBenefIndirect}" style="width: 80%"/>
                <p:outputLabel value="Basado en:"/>
                <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group">
                    <p:outputLabel value="Frente:"/>
                    <p:inputText value="#{ctCem.objObra.frentBenefIndirect}" style="width: 80%"/>
                    <p:outputLabel value="Costo metro lineal:"/>
                    <p:inputText value="#{ctCem.objObra.valorMetroIndirecto}" style="width: 80%"/>  
                    <p:outputLabel value="Avalúo:"/>
                    <p:inputText value="#{ctCem.objObra.avaluoBenefIndirect}" style="width: 80%"/>   
                    <p:outputLabel value="Rango de afectación:"/>
                    <p:inputText value="#{ctCem.objObra.rangoAfectInd}"/>
                </p:panelGrid>
            </p:panelGrid>
            <center>
                <p:commandButton value="Guardar"
                                 icon="ui-icon-save"
                                 action="#{ctCem.registrarObra()}"
                                 update="frmNuevaObra,frmObras:tblObras"/>
                <p:commandButton value="Cancelar"
                                 icon="ui-icon-close"
                                 onclick="PF('dlgNuevaObra').hide()" 
                                 process="@this"/>
            </center>
        </h:form>
    </p:dialog>
</ui:composition>